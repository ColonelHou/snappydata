stage "preparation"

node {
	stage 'Checkout Snappydata repo'
	checkout([
		$class: 'GitSCM',
		branches: [[name: 'feature/jenkins-ci']],
		doGenerateSubmoduleConfigurations: false,
		extensions: [],
		submoduleCfg: [],
		userRemoteConfigs: [
			[credentialsId: 'c6aa6881-51ea-448f-8770-6eb57bf0d223',
			url: 'https://github.com/SnappyDataInc/snappydata.git']
		]
	])
	
	stage 'checkout spark repo'
	dir('cd spark') {
		checkout([
			$class: 'GitSCM',
			branches: [[name: '*/master']],
			doGenerateSubmoduleConfigurations: false,
			extensions: [],
			submoduleCfg: [],
			userRemoteConfigs: [
				[credentialsId: 'c6aa6881-51ea-448f-8770-6eb57bf0d223',
				url: 'https://github.com/SnappyDataInc/spark.git']
			]
		])
	}
	
	stage 'checkout snappy-connectors'
	dir('cd snappy-connectors') {
		checkout([
			$class: 'GitSCM',
			branches: [[name: '*/master']],
			doGenerateSubmoduleConfigurations: false,
			extensions: [],
			submoduleCfg: [],
			userRemoteConfigs: [
				[credentialsId: 'c6aa6881-51ea-448f-8770-6eb57bf0d223',
				url: 'https://github.com/SnappyDataInc/snappy-connectors.git']
			]
		])
	}
	
	stage 'checkout aqp'
	sh("mkdir aqp")
	dir('cd aqp') {
		checkout([
			$class: 'GitSCM',
			branches: [[name: '*/master']],
			doGenerateSubmoduleConfigurations: false,
			extensions: [],
			submoduleCfg: [],
			userRemoteConfigs: [
				[credentialsId: 'c6aa6881-51ea-448f-8770-6eb57bf0d223',
				url: 'https://github.com/SnappyDataInc/snappy-aqp.git']
			]
		])
	}

	stage 'checkout spark-jobserver repo'
	dir('cd spark-jobserver') {
		checkout([
			$class: 'GitSCM',
			branches: [[name: '*/master']],
			doGenerateSubmoduleConfigurations: false,
			extensions: [],
			submoduleCfg: [],
			userRemoteConfigs: [
				[credentialsId: 'c6aa6881-51ea-448f-8770-6eb57bf0d223',
				url: 'https://github.com/SnappyDataInc/spark-jobserver.git']
			]
		])
	}
	
	stage 'checkout snappy-store repo'
	dir('cd store') {
		checkout([
			$class: 'GitSCM',
			branches: [[name: '*/master']],
			doGenerateSubmoduleConfigurations: false,
			extensions: [],
			submoduleCfg: [],
			userRemoteConfigs: [
				[credentialsId: 'c6aa6881-51ea-448f-8770-6eb57bf0d223',
				url: 'https://github.com/SnappyDataInc/snappy-store.git']
			]
		])
	}
}
